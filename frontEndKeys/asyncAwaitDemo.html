<!DOCTYPE html>
<html>
<head>
    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> -->
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<style>

</style>
<body>

<h1 id="result"></h1>
<button id="btn">click</button>
<button id="startId">Start</button>
<div>
    <span style="display: inline-block">THIS IS LIST</span>
    <ul id="ulID">
    </ul>
</div>
</body>
<script type="text/javascript">
    $(document).ready(function(){
      $("#btn").click(function(){
        asyncTest(1).then(function (result) {
            $("#result").html(result)
        });
        $("#result").html('Waiting...')
      });

      $('#startId').on('click', ()=>{
          var count = 0;
          var interval = setInterval((cb) => {
              $("#ulID").append(`<li>` + (new Date()) + `</li>`);
              count++;
              cb(count);
          }, 2000, (val) => {
              if (val >= 10) { 
                  clearInterval(interval) 
                }
          })
      })
      
    });
    async function asyncTest(val) {
            var myDate = new Date();
            console.log('Start', myDate.getSeconds());
            const symbol = await awaitTest1(val);
            const stockPrice = await awaitTest2(symbol);
            var myDate2 = new Date();
            console.log('End', myDate2.getSeconds());
            return stockPrice;
        }
        function awaitTest1(val) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve(val + 1);
                }, 1000);
            });
        }
        function awaitTest2(val) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve(val + 1);
                }, 1000);
            });
        }
</script>
</html>